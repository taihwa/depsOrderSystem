"use strict";(self["webpackChunkjumun"]=self["webpackChunkjumun"]||[]).push([[48],{4048:(e,a,n)=>{n.r(a),n.d(a,{default:()=>T});var t=n(3673),u=n(2323);const l={class:"row"},s={class:"col"},m=(0,t._)("div",{class:"text-h6"},"주문 전체",-1),r=(0,t._)("div",{class:"text-h6"},"주문 요약",-1),o=(0,t._)("div",{class:"text-h6"},"오류",-1),i=(0,t.Uk)(" 주문자를 선택해 주세요 ");function d(e,a,n,d,c,p){const _=(0,t.up)("q-tab"),b=(0,t.up)("q-tabs"),f=(0,t.up)("q-separator"),h=(0,t.up)("q-icon"),w=(0,t.up)("q-input"),j=(0,t.up)("q-table"),g=(0,t.up)("q-tab-panel"),q=(0,t.up)("q-tab-panels"),W=(0,t.up)("q-card"),Z=(0,t.up)("q-space"),Q=(0,t.up)("q-btn"),V=(0,t.up)("q-card-section"),y=(0,t.up)("q-dialog"),v=(0,t.up)("q-page"),k=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(v,null,{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t._)("div",s,[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{modelValue:e.tab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tab=a),dense:"",class:"bg-grey-3",align:"justify","narrow-indicator":""},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{name:"table",label:"주문전체"}),(0,t.Wm)(_,{name:"summary",label:"요약"})])),_:1},8,["modelValue"]),(0,t.Wm)(f),(0,t.Wm)(q,{modelValue:e.tab,"onUpdate:modelValue":a[2]||(a[2]=a=>e.tab=a),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"table"},{default:(0,t.w5)((()=>[m,(0,t.Wm)(j,{grid:"","grid-header":"",title:e.store_name,rows:e.rows,columns:e.columns,"row-key":"name",filter:e.filter,"hide-header":""},{"top-right":(0,t.w5)((()=>[(0,t.Wm)(w,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filter=a),placeholder:"Search"},{append:(0,t.w5)((()=>[(0,t.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["title","rows","columns","filter"])])),_:1}),(0,t.Wm)(g,{name:"summary"},{default:(0,t.w5)((()=>[r,(0,t.Uk)(" "+(0,u.zw)(e.summary),1)])),_:1})])),_:1},8,["modelValue"])])),_:1})])]),(0,t.Wm)(y,{modelValue:e.alert,"onUpdate:modelValue":a[3]||(a[3]=a=>e.alert=a),"transition-show":"slide-down"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{class:"row items-center q-pb-none"},{default:(0,t.w5)((()=>[o,(0,t.Wm)(Z),(0,t.wy)((0,t.Wm)(Q,{icon:"close",flat:"",round:"",dense:""},null,512),[[k]])])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[i])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}const c=(0,t.aZ)({name:"CreateJumun",data(){return{store_name:"",menuList:[],creator:"",selection:[],jumunja:"",jumun_id:"",alert:!1,filter:"",columns:[{name:"jumunja",required:!0,label:"주문자",align:"left",field:"jumunja",sortable:!0},{name:"menu_name",align:"center",label:"메뉴명",field:"menu_name",sortable:!0},{name:"menu_price",label:"가격",field:"menu_price",sortable:!0}],rows:[],tab:"table",summary:{}}},async created(){const{data:e,error:a}=await this.$supabase.from("jumun_page_master").select("*, store (store_name), jumun_page(jumunja, menus(*))").eq("id",this.$route.params.jumunId),n=e[0].jumun_page;this.store_name=e[0].store.store_name,this.rows=n.map((e=>{let a={};return a.jumunja=e.jumunja,a.menu_name=e.menus.name,a.menu_price=e.menus.price,a})),this.summary=n.reduce((function(e,a){return a.menus.name in e?e[a.menus.name]++:e[a.menus.name]=1,e}),{})},methods:{async createOrder(){if(!this.jumunja)return void(this.alert=!0);const e=this.selection.map((e=>{let a={};return a.jumunja=this.jumunja,a.page_master_id=this.jumun_id,a.menu_id=e,a}));console.log(e);const{data:a,error:n}=await this.$supabase.from("jumun_page").insert(e);console.log(a),console.log(n)},getUser(){let e=this.$supabase.auth.session();console.log(e)},goPage(e){this.$router.push(e)}}});var p=n(4260),_=n(4379),b=n(151),f=n(7547),h=n(3269),w=n(5869),j=n(5906),g=n(6602),q=n(3076),W=n(4842),Z=n(4554),Q=n(6778),V=n(5589),y=n(2025),v=n(8240),k=n(677),U=n(7518),C=n.n(U);const P=(0,p.Z)(c,[["render",d]]),T=P;C()(c,"components",{QPage:_.Z,QCard:b.Z,QTabs:f.Z,QTab:h.Z,QSeparator:w.Z,QTabPanels:j.Z,QTabPanel:g.Z,QTable:q.Z,QInput:W.Z,QIcon:Z.Z,QDialog:Q.Z,QCardSection:V.Z,QSpace:y.Z,QBtn:v.Z}),C()(c,"directives",{ClosePopup:k.Z})}}]);