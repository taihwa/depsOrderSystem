"use strict";(self["webpackChunkjumun"]=self["webpackChunkjumun"]||[]).push([[565],{4565:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var u=a(3673),s=a(2323);const l={class:"row"},n={class:"col"},o={class:"text-h6"},i={class:"text-subtitle2"},r=(0,u.Uk)("메뉴"),d=(0,u.Uk)("주문하기"),m=(0,u._)("div",{class:"text-h6"},"오류",-1),c=(0,u.Uk)(" 주문자를 선택해 주세요 ");function p(e,t,a,p,_,w){const h=(0,u.up)("q-input"),f=(0,u.up)("q-card-section"),j=(0,u.up)("q-card"),g=(0,u.up)("q-item-label"),W=(0,u.up)("q-checkbox"),Z=(0,u.up)("q-item-section"),b=(0,u.up)("q-item"),q=(0,u.up)("q-list"),k=(0,u.up)("q-btn"),Q=(0,u.up)("q-space"),v=(0,u.up)("q-dialog"),U=(0,u.up)("q-page"),V=(0,u.Q2)("ripple"),C=(0,u.Q2)("close-popup");return(0,u.wg)(),(0,u.j4)(U,null,{default:(0,u.w5)((()=>[(0,u._)("div",l,[(0,u._)("div",n,[(0,u.Wm)(j,{class:"my-card"},{default:(0,u.w5)((()=>[(0,u.Wm)(f,null,{default:(0,u.w5)((()=>[(0,u._)("div",o,(0,s.zw)(e.store_name)+"("+(0,s.zw)(e.creator)+")",1),(0,u._)("div",i,[(0,u.Wm)(h,{outlined:"",modelValue:e.jumunja,"onUpdate:modelValue":t[0]||(t[0]=t=>e.jumunja=t),label:"주문자 이름"},null,8,["modelValue"])])])),_:1})])),_:1}),(0,u.Wm)(q,null,{default:(0,u.w5)((()=>[(0,u.Wm)(g,{header:""},{default:(0,u.w5)((()=>[r])),_:1}),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(e.menuList,(a=>(0,u.wy)(((0,u.wg)(),(0,u.j4)(b,{tag:"label",key:a.id},{default:(0,u.w5)((()=>[(0,u.Wm)(Z,{side:"",top:""},{default:(0,u.w5)((()=>[(0,u.Wm)(W,{modelValue:e.selection,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selection=t),val:a.id,color:"orange"},null,8,["modelValue","val"])])),_:2},1024),(0,u.Wm)(Z,null,{default:(0,u.w5)((()=>[(0,u.Wm)(g,null,{default:(0,u.w5)((()=>[(0,u.Uk)((0,s.zw)(a.name),1)])),_:2},1024),(0,u.Wm)(g,{caption:""},{default:(0,u.w5)((()=>[(0,u.Uk)((0,s.zw)(a.price)+"원 ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)),[[V]]))),128))])),_:1})])]),(0,u.Wm)(k,{onClick:t[2]||(t[2]=t=>e.createOrder())},{default:(0,u.w5)((()=>[d])),_:1}),(0,u.Wm)(v,{modelValue:e.alert,"onUpdate:modelValue":t[3]||(t[3]=t=>e.alert=t),"transition-show":"slide-down"},{default:(0,u.w5)((()=>[(0,u.Wm)(j,null,{default:(0,u.w5)((()=>[(0,u.Wm)(f,{class:"row items-center q-pb-none"},{default:(0,u.w5)((()=>[m,(0,u.Wm)(Q),(0,u.wy)((0,u.Wm)(k,{icon:"close",flat:"",round:"",dense:""},null,512),[[C]])])),_:1}),(0,u.Wm)(f,null,{default:(0,u.w5)((()=>[c])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}var _=a(8825);const w=(0,u.aZ)({setup(){const e=(0,_.Z)();return{showNotif(){e.notify({message:"저장되었습니다.",color:"purple"})}}},name:"CreateJumun",data(){return{store_name:"",menuList:[],creator:"",selection:[],jumunja:"",jumun_id:"",alert:!1}},async created(){const e=await this.$supabase.from("jumun_page_master").select("*, store (*)").eq("link_url",this.$route.params.jumunId),t=await this.$supabase.from("users").select("user_name").eq("id",e.data[0].user_id),a=await this.$supabase.from("store").select("*, menus (*)").eq("id",e.data[0].store.id);this.creator=t.data[0].user_name,this.jumun_id=e.data[0].id,this.store_name=a.data[0].store_name,this.menuList=a.data[0].menus},methods:{async createOrder(){if(!this.jumunja)return void(this.alert=!0);const e=this.selection.map((e=>{let t={};return t.jumunja=this.jumunja,t.page_master_id=this.jumun_id,t.menu_id=e,t})),{data:t,error:a}=await this.$supabase.from("jumun_page").insert(e);t&&alert("주문완료")},getUser(){let e=this.$supabase.auth.session();console.log(e)},goPage(e){this.$router.push(e)}}});var h=a(4260),f=a(4379),j=a(151),g=a(5589),W=a(4842),Z=a(7011),b=a(2350),q=a(3414),k=a(2035),Q=a(1420),v=a(8240),U=a(6778),V=a(2025),C=a(6489),y=a(677),$=a(7518),x=a.n($);const I=(0,h.Z)(w,[["render",p]]),L=I;x()(w,"components",{QPage:f.Z,QCard:j.Z,QCardSection:g.Z,QInput:W.Z,QList:Z.Z,QItemLabel:b.Z,QItem:q.Z,QItemSection:k.Z,QCheckbox:Q.Z,QBtn:v.Z,QDialog:U.Z,QSpace:V.Z}),x()(w,"directives",{Ripple:C.Z,ClosePopup:y.Z})}}]);