"use strict";(self["webpackChunkjumun"]=self["webpackChunkjumun"]||[]).push([[344],{8344:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Z});var s=t(3673),n=t(2323);const a=(0,s._)("h1",{class:"text-h4"},"가게 등록하기",-1),o={class:"row"},i={class:"col"},u={class:"row"},d={class:"col"},r={class:"row"},m={class:"col"},c=(0,s._)("h1",{class:"text-h5"},"메뉴",-1),h={class:"row"},p={class:"col"},g=(0,s.Uk)("메뉴 추가"),_={class:"col"},v={class:"col"},x={class:"col"},f=(0,s.Uk)("삭제");function w(e,l,t,w,V,L){const b=(0,s.up)("q-separator"),k=(0,s.up)("q-input"),U=(0,s.up)("q-btn"),W=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(W,null,{default:(0,s.w5)((()=>[(0,s._)("div",null,[a,(0,s.Wm)(b),(0,s._)("div",o,[(0,s._)("div",i,[(0,s.Wm)(k,{outlined:"",modelValue:e.storeName,"onUpdate:modelValue":l[0]||(l[0]=l=>e.storeName=l),label:"가게이름"},null,8,["modelValue"])])]),(0,s._)("div",u,[(0,s._)("div",d,[(0,s.Wm)(k,{outlined:"",modelValue:e.storeTel,"onUpdate:modelValue":l[1]||(l[1]=l=>e.storeTel=l),label:"가게 연락처"},null,8,["modelValue"])])]),(0,s._)("div",r,[(0,s._)("div",m,[(0,s.Wm)(k,{outlined:"",modelValue:e.type,"onUpdate:modelValue":l[2]||(l[2]=l=>e.type=l),label:"가게 유형(ex.중국집/피자등등)"},null,8,["modelValue"])])]),c,(0,s._)("div",h,[(0,s._)("div",p,[(0,s.Wm)(U,{onClick:l[3]||(l[3]=l=>e.addMenu())},{default:(0,s.w5)((()=>[g])),_:1})])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.menuList,(l=>((0,s.wg)(),(0,s.iD)("div",{class:"row",key:l.index},[(0,s._)("div",_,[(0,s.Uk)((0,n.zw)(l.index)+" ",1),(0,s.Wm)(k,{outlined:"",modelValue:l.name,"onUpdate:modelValue":e=>l.name=e,label:"음식명"},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("div",v,[(0,s.Wm)(k,{outlined:"",modelValue:l.price,"onUpdate:modelValue":e=>l.price=e,label:"가격"},null,8,["modelValue","onUpdate:modelValue"])]),(0,s._)("div",x,[(0,s.Wm)(U,{onClick:t=>e.deleteMenu(l.index),danger:""},{default:(0,s.w5)((()=>[f])),_:2},1032,["onClick"])])])))),128))]),(0,s.Wm)(b),(0,s.Wm)(U,{color:"secondary",label:"저장",onClick:l[4]||(l[4]=l=>e.saveStore())})])),_:1})}const V=(0,s.aZ)({name:"PageIndex",data(){return{storeName:"",storeTel:"",type:"",menuList:[]}},methods:{deleteMenu(e){console.log(e);let l=this.menuList.findIndex((l=>l.index===e));l>-1&&this.menuList.splice(l,1)},addMenu(){let e={name:"",price:""};e.index=this.getMenuIndex(),this.menuList.push(e)},getMenuIndex(){let e=this.menuList.length,l=0;if(0===e)return 0;if(1===e)return 1!==this.menuList[0].index?1:this.menuList[0].index+1;if(e>1)for(let t=1;t<e;t++)this.menuList[t].index>this.menuList[t-1].index&&(l=this.menuList[t].index+1);return l},getUser(){let e=this.$supabase.auth.session();console.log(e)},goPage(e){this.$router.push(e)},async saveStore(){console.log(this.menuList);const{data:e,error:l}=await this.$supabase.from("store").insert([{store_name:this.storeName,store_tel:this.storeTel,type:this.type}]);if(null!==l)return alert(l);if(e.length>0){let l=e[0].id;const{menuData:t,menuError:s}=await this.saveMenu(l);null!==s&&console.log(s),t.length>0&&console.log(t)}},async saveMenu(e){for(let s=0;s<this.menuList.length;s++)this.menuList[s].store_id=e,delete this.menuList[s].index;const{data:l,error:t}=await this.$supabase.from("menus").insert(this.menuList);return{menuData:l,menuError:t}}}});var L=t(4260),b=t(4379),k=t(5869),U=t(4842),W=t(8240),y=t(7518),M=t.n(y);const C=(0,L.Z)(V,[["render",w]]),Z=C;M()(V,"components",{QPage:b.Z,QSeparator:k.Z,QInput:U.Z,QBtn:W.Z})}}]);